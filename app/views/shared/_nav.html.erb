<% active_categories = [] unless (defined?(:active_categories) && active_categories.present?) %>

<a href="#top" class="link-to-top-block"><%= t('back_to_top') %>
  <span class="icon icon--up-chevron-blue"></span>
</a>

<% if categories.present? %>
  <nav class="nav" role="navigation" aria-label="main" id="primary-nav" tabindex="-1">

      <% categories.each do |category| %>
      
        <% if active_categories.member?(category.id) %>

            <h2 class="link-list__title"><%= category.title %></h2>
            <ul class="link-list">
              <% category.contents.each do |sub_category| %>
                <li class="link-list__item <%= active_categories.member?(sub_category.id) ? 'is-selected' : '' %>">
                  <div class="link-list__toggle" data-dough-component="Collapsable"
                  data-dough-collapsable-config='{"iconPosition":"right","oneGroupOpenOnly":"true"<%= active_categories.member?(sub_category.id) ? ",\"forceTo\":\"show\"" : "" %>}'
                  data-dough-collapsable-trigger="<%= sub_category.slug %>">
                    <%= sub_category.title %></div>
                  <ul class="link-list--secondary" data-dough-collapsable-target="<%= sub_category.slug %>">
                    <% sub_category.left_nav_items.each do |item| %>
                    <li class="link-list--secondary__item">
                      <%= link_to item.title, item.path, class: "link-list--XXXX" %>
                    </li>
                    <% end %>
                  </ul>
                </li>
              <% end %>
            </ul>
        <% end %>
      <% end %>
  </nav>
<% end %>
