
// Setup requireJS config
requirejs.config({
  baseUrl: '/assets',
  paths: {
    analytics: "<%= javascript_path('mas_analytics').sub('.js', '') %>",
    pubsub: "<%= javascript_path('jquery-tiny-pubsub/src/tiny-pubsub').sub('.js', '') %>",
    waypoints: "<%= javascript_path('jquery-waypoints/waypoints').sub('.js', '') %>",
    // analytics: MAS.paths.mas_analytics,
    // pubsub: MAS.paths.pubsub,
    // waypoints: MAS.paths.waypoints,
    webfonts: '//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont'
  },
  shim: {
    'pubsub': ['jquery'],
    'waypoints': ['jquery']
  }
});

// If fonts supported, load them! Config + fontSupport set in base.html head
if(MAS.supports.fonts){
  require(['webfonts'], function(){
    WebFont.load(MAS.fontConfig); 
    if(MAS.supports.localstorage) localStorage.setItem('MAS.fontsCached', 'true');
  })
}

// Load analytics
require(['analytics'], function(analytics) {
  MAS.analytics = analytics;
  // Initiate analytics & pass in config
  analytics.scrollTracking({
    el: '.editorial',
    triggerPoints: [0.25, 0.5, 0.75, 1]
  });
});

// require(['jquery', 'pubsub', 'waypoints'], function($, pubsub, waypoints) {
//   console.log( $.subscribe )
//   console.log( $.waypoints )

//   // function handle(e, a, b, c) {
//   //   // `e` is the event object, you probably don't care about it.
//   //   console.info(a + b + c);
//   // };
//   // $.subscribe("/some/topic", handle);
//   // $.publish("/some/topic", [ "a", "b", "c" ]);
// });

