<div class="l-constrained">
  <div class="home-buying-checklist-top">
    <div class="l-1col">
      <h1><%= t('home_buying_checklist.title') %></h1>
    </div>
    <div class="home-buying-checklist__top-content">
      <div class="home-buying-checklist__top-content-text">
        <p><%= t('home_buying_checklist.intro') %></p>
        <p class="home-buying-checklist__top-content--desktop-only"><%= t('home_buying_checklist.what_is_this.body') %></p>
      </div>

      <div class="home-buying-checklist__collapsable home-buying-checklist__top-content--mobile-only">
        <p>
          <a class="collapsable__trigger" data-dough-component="Collapsable" data-dough-collapsable-trigger="what-is-this">
            <%= t('home_buying_checklist.what_is_this.title') %>
          </a>
        </p>

        <div class="home-buying-checklist__collapsable-target collapsable__target" data-dough-collapsable-target="what-is-this">
          <%= t('home_buying_checklist.what_is_this.body') %>
        </div>
      </div>

      <div class="home-buying-checklist__top-content-video">
        <iframe width="100%" height="200px" src="https://www.youtube.com/embed/jfaZQBCzY44" frameborder="0" allowfullscreen title="Video: The total cost of buying a home"></iframe>
      </div>

      <div class="home-buying-checklist__collapsable">
        <p>
          <a class="collapsable__trigger" data-dough-component="Collapsable" data-dough-collapsable-trigger="how-it-works">
            <%= t('home_buying_checklist.how_it_works.title') %>
          </a>
        </p>

        <div class="home-buying-checklist__collapsable-target collapsable__target" data-dough-collapsable-target="how-it-works">
          <%= t('home_buying_checklist.how_it_works.body_html') %>
        </div>
      </div>
    </div>
    <div class="l-1col">
      <h2><%= t('home_buying_checklist.form.title') %></h2>
    </div>
  </div>

  <form action="">
    <div class="home-buying-checklist__form" data-dough-component="HomeBuyingChecklist">
      <div class="home-buying-checklist__form-header">
        <div class="home-buying-checklist__form-header-left">
          <p><%= t('home_buying_checklist.form.headers.fees_and_costs') %></p>
        </div>
        <div class="home-buying-checklist__form-header-center">
          <p><%= t('home_buying_checklist.form.headers.description') %></p>
        </div>
        <div class="home-buying-checklist__form-header-right">
          <p><%= t('home_buying_checklist.form.headers.calculate') %></p>
        </div>
      </div>
      <% t('home_buying_checklist.form.items').each_with_index do |item, i| %>
        <div class="home-buying-checklist__form-row">
          <div class="home-buying-checklist__form-left">
            <div class="home-buying-checklist__form-label" data-dough-component="PopupTip">
              <span class="visually-hidden">
                Cost
                <%= i + 1 %>
                of
                <%=t('home_buying_checklist.form.items').count %>
              </span>
              <%= item[:name] %>
              <button data-dough-popup-trigger type="button" class="popup-tip__button home-buying-checklist__button-mobile">
                i
              </button>

              <div data-dough-popup-container class="popup-tip__container">
                <div data-dough-popup-content>
                  <h3>Average <%= item[:name] %></h3>
                  <p>
                    <%= item[:description] %>
                  </p>
                  <p>
                    <%= item[:link_html].html_safe %>
                  </p>
                </div>
                <button data-dough-popup-close type="button" class="popup-tip__close">
                  <span aria-hidden="true">
                    <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon svg-icon--mobile-close-box">
                      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-icon--mobile-close-box"></use>
                    </svg>
                  </span>
                  <span class="visually-hidden">Close</span>
                </button>
              </div>
            </div>
          </div>

          <div class="home-buying-checklist__form-center">
            <div class="home-buying-checklist__form-description" data-dough-component="PopupTip">
              <p>
                <%= item[:description] %>
                <% if item[:extra_info] %>
                  <button data-dough-popup-trigger type="button" class="popup-tip__button">
                    i
                  </button>
                <% end %>
              </p>

              <% if item[:extra_info] %>
                <div data-dough-popup-container class="popup-tip__container">
                  <p data-dough-popup-content>
                    <%= item[:extra_info] %>
                  </p>
                  <button data-dough-popup-close type="button" class="popup-tip__close">
                    <span aria-hidden="true">
                      <svg xmlns="http://www.w3.org/2000/svg" class="svg-icon svg-icon--mobile-close-box">
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-icon--mobile-close-box"></use>
                      </svg>
                    </span>
                    <span class="visually-hidden">Close</span>
                  </button>
                </div>
              <% end %>
              <p>
                <%= item[:link_html].html_safe %>
              </p>
            </div>
          </div>

          <div class="home-buying-checklist__form-right">
            £ <input type="number" class="home-buying-checklist__form-input" data-dough-input-value>
            <span class="icon--tick"></span>
            <div class="home-buying-checklist__callout-inactive" data-dough-input-message>
              <div class="callout">
                <p><%= item[:callout_html].html_safe %></p>
              </div>
            </div>
          </div>
        </div>
      <% end %>

      <div class="home-buying-checklist__form-row--footer" aria-live="polite" aria-atomic="true">
        <div class="home-buying-checklist__form-results-left">
          Your total upfront cost:
        </div>

        <div class="home-buying-checklist__form-results-right">
          £ <span data-dough-input-result>0</span>
        </div>
      </div>
    </div>
  </form>
  <div class="l-1col">
    <div class="home-buying-checklist__buttons">
      <button class="button button--primary" onclick="window.print()">
        Print my checklist
      </button>
    </div>
  </div>
</div>
