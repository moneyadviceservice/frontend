<!DOCTYPE html>

<!--[if IE 7 ]> <html lang="<%= I18n.locale %>" class="ie ie7 no-js"> <![endif]-->
<!--[if IE 8 ]> <html lang="<%= I18n.locale %>" class="ie ie8 no-js"> <![endif]-->
<!--[if IE 9 ]> <html lang="<%= I18n.locale %>" class="ie ie9 no-js"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="<%= I18n.locale %>" class="no-js"><!--<![endif]-->

<head>
  <title>[page] - [section] - <%= t('.title') %></title>

  <%= csrf_meta_tags %>

  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
  <meta http-equiv="cleartype" content="on">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="HandheldFriendly" content="True">
  <meta name="description" content=":description" />
  <meta name="keywords" content=":keywords" />

  <!--link rel="canonical" href=""-->

  <%# Basic styles for all devices, doesnt contain anything that could cause rendering issues such as positional info %>
  <%= stylesheet_link_tag 'basic' %>

  <%# Fixed width styles and html5shiv for IE7+8 , styles will not include any media queries, but will include .ie specific fixes %>
  <!--[ if ( gte IE 7 ) & ( lte IE 8 ) & (!IEMobile) ]>
    <%= stylesheet_link_tag 'enhanced_fixed', media: 'all' %>
    <%= javascript_include_tag 'html5shiv/dist/html5shiv.js' %>
  <![endif]-->

  <%# Responsive styles for all modern devices, excluded from older IE version %>
  <!--[ if ( !IE ) | ( gte IE 9 ) ]><!-->
  <%= stylesheet_link_tag 'enhanced_responsive', media: 'only all' %>
  <!--<![endif]-->

  <%= yield :js_bootstrap %>
  <%= yield :head %>

  <!--
    javascript that has to run immediately
    - js-off > js-enabled
    - google analytics
  -->
  <%= javascript_include_tag 'in_head' %>
  
  <% if Rails.env.development? %>
    <script>MAS.env = 'development';</script>
  <% else %>
    <script>MAS.env = 'production';</script>
  <% end %>
  <!--[ if ( !IE ) | ( gte IE 9 ) ]><!-->
    <script>
      MAS.fontSupport = 'true';
      MAS.fontConfig = {
        custom: {
          families: ['MuseoSlab', 'icomoon'],
          urls: ['<%= stylesheet_path('fonts') %>']
       }
      };
    </script>
  <!--<![endif]-->

</head>
<body>

  <%# Google Tag Manager %>
  <noscript>
    <%= tag :iframe, { src:   "//www.googletagmanager.com/ns.html?id=#{Rails.application.config.google_tag_manager_id}", style: 'display:none;visibility:hidden', width: 0, height: 0 } %>
  </noscript>
  <script>
    (function (w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
      var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : '';
          j.async = true;
          j.src = '//www.googletagmanager.com/gtm.js?id=' + i + dl;
          f.parentNode.insertBefore(j, f);
    })(window, document, 'script', 'dataLayer', '<%= Rails.application.config.google_tag_manager_id %>');
  </script>

  <%= content_for?(:content) ? yield(:content) : yield %>


  <% if Rails.env.development? %>
    <!--[if (gt IE 9)|!(IE)]><!-->
    <%= javascript_include_tag 'html_inspector' %>
    <!--<![endif]-->
  <% end %>

  <script src="<%= javascript_path('requirejs/require') %>" data-main="<%= javascript_path('application') %>"></script>  
  <%= yield :scripts %>

</body>
</html>
